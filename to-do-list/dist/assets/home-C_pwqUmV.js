import{r as u,c as n,a as s,w as v,v as T,b as C,u as r,F as y,d as $,o as a,e as d,t as m}from"./index-DIIOTc67.js";const E="/assets/close%20(1)-BSz-e2DU.png",b="/assets/quadrado-C0y6EAWT.png",x="/assets/quadrado%20(2)-DBJM_ueP.png",S="/assets/marca-de-verificacao%20(1)-B7CLoSKX.png",B="/assets/marca-cruzada-lH9PtfxE.png",I={class:"main-container"},j=["src"],w={class:"text-container"},A={class:"text"},L={key:0,class:"status-red"},P={key:1,class:"status-green"},z=["onClick"],D=["src"],q=["src"],N=["onClick"],U=["src"],V=["onClick"],M=["src"],K={__name:"home",setup(F){const p=u(null);u(null);const h=u([]),c=u(""),l=void 0;function i(){h.value=[];const o=localStorage.getItem("token");fetch(`${l}/getTasks`,{method:"GET",headers:{Authorization:`Bearer ${o}`}}).then(t=>t.json()).then(t=>{t.tasks.forEach(e=>{h.value.push(e)})}).catch(t=>console.log(t))}i();function g(){const o=localStorage.getItem("token");o||$router.push("/login"),fetch(`${l}/PostTasks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({tarefa:c.value})}).then(t=>(console.log("Status da resposta:",t.status),t.json())).then(t=>{c.value="",i()}).catch(t=>{console.error("Erro ao criar tarefa:",t)})}function f(o){fetch(`${l}/finishTasks/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"}}).then(t=>t.json()).then(t=>{t.ok&&(c.value="",i())}).catch(t=>{console.error("Erro ao atualizar tarefa:",t)})}function k(o){fetch(`${l}/deleteTasks/${o}`,{method:"DELETE"}).then(t=>t.json()).then(t=>{t.ok&&(c.value="",i())}).catch(t=>{console.log("deu erro"+t)})}return(o,t)=>(a(),n("div",I,[t[3]||(t[3]=s("h1",{class:"title"},"CREATE TASK",-1)),s("div",{class:"modal",ref_key:"modal",ref:p},[v(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),placeholder:"create new"},null,512),[[T,c.value]]),s("button",{onClick:t[1]||(t[1]=e=>g()),class:"btn-create"},[t[2]||(t[2]=C(" create ",-1)),s("img",{src:r(E),alt:"",class:"img-create"},null,8,j)])],512),(a(!0),n(y,null,$(h.value,e=>(a(),n("div",{key:e.id,class:"task-container"},[s("div",w,[s("p",A,m(e.titulo),1)]),e.status!=="concluida"?(a(),n("p",L,m(e.status),1)):d("",!0),e.status==="concluida"?(a(),n("p",P,m(e.status),1)):d("",!0),e.status&&e.status.trim().toLowerCase()==="concluida"?(a(),n("button",{key:2,onClick:_=>f(e.id),class:"btn-check"},[s("img",{src:r(x),alt:"",class:"border-check"},null,8,D),s("img",{src:r(S),alt:"",class:"v-check"},null,8,q)],8,z)):d("",!0),e.status&&e.status.trim().toLowerCase()!=="concluida"?(a(),n("button",{key:3,onClick:_=>f(e.id),class:"btn-check"},[s("img",{src:r(b),alt:"",class:"img-nc"},null,8,U)],8,N)):d("",!0),s("button",{onClick:_=>k(e.id),class:"btn-delete"},[s("img",{src:r(B),alt:""},null,8,M)],8,V)]))),128))]))}};export{K as default};
